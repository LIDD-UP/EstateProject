关于realtor 网站的分析情况总结

1:不挂vpn的情况:(哈尔滨ip)
    1:动态的user-agent +(禁用cookie)(不携带cookie请求)
        运行的情况:几十个请求就直接封ip
        2:启用cookie(携带cookie过去)
            运行情况:也是一样几十个请求过去直接封ip
    2:使用单个user-agent +禁用cookie
        1)几十个请求,封锁user-agent,
            2)继续替换user-agent,几个请求直接挂
        2:启用cookie:
            1)几十个请求封user-agent
            2):替换user-agent,几十个请求挂

    总结:哈尔滨的ip的封锁级别高,封锁级别包括ip封锁和user-agent封锁

2:挂vpn的情况(台湾的vpn)(速度有点慢,30-100 KB/s 内的网速)
    1:抓取详情页面的dom:(动态user-agent+禁用cookie)
        100多个请求被封ip
    2:抓取接口(所有条件传入爬虫起始url中)
        1:关于所有条件传入起始url和只传入一个起始url的解释:
            由于框架是异步的,可能起始的时候会请求很多搜索条件的页面,而不是抓取详情页数据的接口数据(json);在这一段时间请求的url多
            但是如果只传入一个请求条件的情况下:更多的抓取数据接口(json),对于分页的请求慢,而少
        2:结果:请求160多次直接封ip
        3:关于这种情况下其他关于(user-agent和cookie)的情况也是一样
    3:抓取数据接口(只有一个条件,数据量大约8000多条的情况)
        1:结果:运行4个小时左右抓完;中间没有被封
        2:使用单独的user-agent:请求100多次被封user-agent,
        3:更换cookie的情况同

    总结:综合上诉1,2,3点情况,怀疑网站存在js反爬(如果请求网站html页面没有执行相关的js文件,就封锁),而对于数据接口不存在js反爬
        但是不知道有没有请求速度的限制(主要哈尔滨ip一下就封,vpn较慢,没有测试快速度下是否会被封)

最终总结:
    1:大方向的几个测试包括上面几个,关于其余细节方面的调试就省略;
    2:关于该网站反爬情况总结
        1:user-agent封锁
        2:ip封锁
            如果动态user-agent,发现你是爬虫直接封ip;
        3:cookie的影响不大,最好是不要cookie
        4:js反爬(可能)
    3:关于抓取策略的问题:
        1:动态user-agent +禁用cookie + 搜索条件一条条传入爬虫(一个搜索条件爬虫再爬另外一个搜索条件)(这种方式在慢速的情况下可行,但是快速不知道)
        2:固定user-agent + 禁用cookie:当user-agent被封的时候再替换(存在问题:这种方式请求个数有限,当前user-agent的个数很难爬完数据)

        注:这个建议是基于慢速(vpn慢)情况下的建议:(快速目前用不知道)


